<!DOCTYPE html>
<head>
  <style>
    body {
      max-width: 960px;
      margin: 1em auto;
    }
  </style>
</head>
<body></body>
<script type="module">

if (location.pathname !== "/") {
  location = `/${location.search}${location.hash}`;
  throw new Error("unexpected path");
}

const tests = [
  "aapl-candlestick",
  "aapl-change-volume",
  "aapl-close",
  "aapl-volume",
  "ballot-status-race",
  "cars-parcoords",
  "covid-ihme-projected-deaths",
  "d3-survey-2015",
  "diamonds-carat-price-dots",
  "diamonds-carat-price",
  "empty",
  "gistemp-anomaly",
  "hadcrut-warming-stripes",
  "letter-frequency-bar",
  "letter-frequency-column",
  "letter-frequency-lollipop",
  "metro-inequality-change",
  "metro-inequality",
  "metro-unemployment-index",
  "metro-unemployment-ridgeline",
  "metro-unemployment",
  "moby-dick-letter-frequency",
  "moby-dick-letter-position",
  "morley-boxplot",
  "movies-profit-by-genre",
  "penguin-mass-sex",
  "penguin-mass",
  "random-walk",
  "seattle-temperature-band",
  "sf-temperature-band",
  "simpsons-ratings",
  "simpsons-views",
  "travelers-year-over-year",
  "uniform-random-difference",
  "us-population-state-age",
  "us-presidential-election-2020",
  "us-retail-sales",
  "us-state-population-change",
  "word-length-moby-dick"
];

const select = document.createElement("select");
select.autofocus = true;
select.style.margin = "1em 0";
select.onchange = () => location.href = `?test=${select.value}`;
select.append(...tests.map(test => {
  const option = document.createElement("option");
  option.value = test;
  option.textContent = test;
  return option;
}));

const initialValue = new URL(location).searchParams.get("test");
if (tests.includes(initialValue)) select.value = initialValue;

document.body.append(select);

import(`./${select.value}.js`)
  .then(module => module.default())
  .then(chart => document.body.append(chart));

</script>
